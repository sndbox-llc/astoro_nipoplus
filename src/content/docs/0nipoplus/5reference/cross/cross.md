---
slug: nipoplus/reference/cross
title: クロス集計
description: 異なるテンプレートに散らばったデータを1つの表に集約する「クロス集計」の使い方を解説します。部品ごとの点検結果やライン別の生産報告を横断的に比較し、組織全体の傾向を可視化。計算列を活用した不良率や稼働率などの独自KPI算出により、データに基づいた的確な意思決定を支援します。
sidebar:
  label: 📊クロス集計
---

:::note[[メニューに無いときはグループ設定から機能を有効にしてください](/nipoplus/editor/groupmanage/#optionalFunction)]
:::

NipoPlusの「クロス集計」機能は、異なる複数のテンプレート（日報、点検シート、生産報告書など）に記録されたデータを、一つの表にまとめて横断的に比較・集計する強力な機能です。

例えば、以下のような複数のテンプレートが存在する場合を考えてみましょう。

- A部品 点検シート（生産数、不良数、不良原因などを記録）
- B部品 点検シート（同上）
- C部品 点検シート（同上）

A部品、B部品、C部品それぞれの生産数や不良数は、通常の[集計機能（累積表や推移表）](/nipoplus/staff/charts)で簡単に集計が可能です。しかし、「部品Aと部品Bと部品C全体の不良率を比較したい」「異なる生産ライン（それぞれ別の日報テンプレートを使用）の生産性を比較したい」といった、複数のデータソースを横断した分析には、クロス集計が不可欠です。

クロス集計は、バラバラに存在するデータから全体の傾向や問題を抽出し、製造業における品質管理、生産性分析、複数工程の進捗管理など、複雑なKPIを可視化することで、データに基づいた意思決定と業務改善を強力に支援します。

## クロス集計テーブルを作成する {#make}

クロス集計テーブルは、1グループに付き最大で50個まで作成が可能です。

1.  左メニューの「集計・CSV出力」をクリックし、集計画面を表示
2.  画面下部の「クロス集計を作成」ボタンをクリック

![異なるテンプレートデータを同時に集計するにはクロス集計を使う](./img/table-make_tablet.webp)

クロス集計テーブル作成ウィンドウがポップアップで全画面に表示されます。
この画面からクロス集計テーブルを作っていきます。

### テーブルの行と列を作成する {#row_col}

クロス集計テーブルは、行と列、そしてそれらが交差するセルで構成されます。

テンプレートを追加すると、自動的に1行（横方向）が追加されます。テンプレートは画面右端の「○件選択」のプルダウンから選択します。
列には「参照列」と「計算列」の2種類があり、参照列ではテンプレート内の入力フォームを指定できます（計算列は後述）。

![クロス集計の設定画面](./img/table-edit_tablet.webp)

上のテーブルは、2つのテンプレート（タイトルを除き2行）と、2つの参照列を追加した例です。
参照列はクリックするだけで追加されますが、そのままだと「列1」のような分かりにくい名前で表示されるため、鉛筆アイコンから名前を分かりやすいものに変更してください。
行と列が交差するセルには、どの値を表示するかをプルダウンで選びます。プルダウンで選べるのはテンプレート内の集計可能な入力フォームに限られます。

### 計算列について - 独自のKPIを算出 {#fomula}

計算列は、参照列のデータをもとに簡単な四則演算（＋・ー・✕・÷）を行うことができる特別な列です。
これにより、NipoPlusの集計機能ではカバーできない独自のKPIや指標を算出できます。

例えば、生産数と破損数を使って、不良率（破損数 ÷ 生産数 × 100）を計算する際に計算列を利用できます。
ここではシンプルに1列目の生産数と2列めの品質を単純に掛け算する列を作りたいときは次の画像のように設計します。

![クロス集計に計算列を追加し、不良率や稼働率など、独自のKPIを自動で計算させる](./img/calc-field_tablet.webp)

### 結果のプレビューと保存 {#save}

実際に作成したクロス集計の結果はプレビューで確認できます。

![クロス集計の結果をプレビューで表示](./img/previews_tablet.webp)

通常の列には日報の集計結果が表示され、計算列には指定した計算式に基づいたデータが表示されます。
※数値が全て0の場合、使用するデータがない可能性があります。

最後にクロス集計に分かりやすい名前をつけて、「保存」ボタンをクリックして保存します。
保存されたクロス集計はクロス集計一覧に表示され、クリックで表示します。複数種類のクロス集計がある場合はボタンを押すごとにテーブルが切り替わります。
集計の期間は右パネルのカレンダーで変更可能です。

![作成したクロス集計を表示させる](./img/view_tablet.png)

これでA部品とB部品、異なるテンプレートで作成された業務日報を同時に比較できるようになりました。

## クロス集計テーブルを編集する {#edit}

作成したクロス集計の構造（表示するテンプレート、参照列、計算列など）を修正する必要がある場合は、修正したいクロス集計を表示後、鉛筆アイコンをクリックします。
編集画面は新規作成画面とほぼ同じです。
