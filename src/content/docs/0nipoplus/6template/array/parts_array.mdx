---
slug: nipoplus/template/array
title: 反復入力フォーム
description: 作業時間と作業内容といった、行数が毎回変化するような日報の入力に便利なフォームです。
sidebar:
  label: 🧩反復入力
---

import ExcelTable from '@components/ExcelTable.astro'

:::tip[[綴り日報もご検討下さい](/nipoplus/reference/tuduri)]
反復入力の代わりに複数の日報を束ねる綴り機能を使う方法もあります
:::

「反復入力」という名前だけではイメージしにくいかもしれませんが、例えば、次のような日報のテンプレートを作れる機能です。

![時間ごとに入力するタイプの日報。よく見る形](./img/array_tablet.webp)

「作成者」や「天候」といった項目は固定ですが、その下にある「時刻、分類、生産数」といった表は日報作成の都度、行数が変わります。このような「行が可変する表形式」のフォームを反復入力フォームで実装できます。

## 反復入力の初期設定

:::note[[入力イメージはこちらから確認できます](/nipoplus/reference/inputmethod/#array)]
:::

反復入力フォームそれ単体では機能しません。これはただの入れ物にすぎず、中身を入れて上げる必要があります。反復入力を追加後に、その中に入力フォーム（各列の項目）を追加していきます。

![反復入力の設定は、反復フォームの中に使用する項目（列）を追加して行う](./img/template_tablet.png)

以下は本入力フォームにのみ存在する設定項目です。

<dl class="basic">
  <dt>初期の行数</dt>
  <dd>日報作成時に反復入力を生成する行数です。初期値は1です。</dd>
  <dt>その他の設定</dt>
  <dd>
    <a href="/nipoplus/editor/template/#common_setting">共通設定事項をご確認ください</a>
  </dd>
</dl>

## 反復の日報をCSVに出力する

- 反復入力の中で使用されている入力フォームがCSV出力に対応していればそのデータもCSV出力が可能です
- CSVは通常1行に1件のデータを表す形式ですが反復入力は1件の日報の中に複数行のデータが格納されるため変則的な形式で出力されます

実際の出力イメージは以下の表を御覧ください。

{/* prettier-ignore */}
<ExcelTable>
提出日, 状態, 文書ID, 承認者1, 作成者, 【晴れ】天候, 【雨】天候, 【自】時間, 【至】時間, 【休憩】時間, 【正常】分類, 【稼働停止】分類, 【メンテナンス】分類, 生産数（個）
2023/1/19 11:57, 進行, Ij2Lhek, 管理者A, Nipoアリス, ⭕, -, 8:00, 11:00, ⭕, -, ⭕, , 5
, , , , , , , 12:30, 16:30, -, -, ⭕, , 0
, , , , , , , 18:00, 20:00, ⭕, -, -, , 2
</ExcelTable>

１件の日報が３行で出力されているイメージ。

## 反復の日報をPDFに出力する

- 反復入力で作成された日報はPDF出力にも対応しています
- 反復の列数が多すぎるとPDFに出力する際にレイアウトが崩れる可能性があります
- 基本的には、テンプレートの設計と同様に、反復入力内の各フォームの幅の合計が12に収まるように設計すると、レイアウトがはみ出しにくくなります
